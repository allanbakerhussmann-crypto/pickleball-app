/* ================================================
   Mobile Modal & Safe Area Utilities
   ================================================
   Handles iOS (notch, Dynamic Island, home indicator)
   and Android (nav bar, gesture bar, keyboard).
   Capacitor-ready: env(safe-area-inset-*) works in
   native WebViews without modification.
   ================================================ */

/* Safe area inset variables */
:root {
  --sai-top: env(safe-area-inset-top, 0px);
  --sai-right: env(safe-area-inset-right, 0px);
  --sai-bottom: env(safe-area-inset-bottom, 0px);
  --sai-left: env(safe-area-inset-left, 0px);
}

/* Prevent body scroll when modal is open */
body.modal-open {
  overflow: hidden;
  position: fixed;
  width: 100%;
  top: calc(-1 * var(--scroll-y, 0px));
}

/* Modal overlay: dvh for dynamic viewport + safe-area padding */
.modal-overlay {
  min-height: 100vh;
  min-height: 100dvh;
  padding-top: max(16px, var(--sai-top));
  padding-bottom: max(16px, var(--sai-bottom));
  padding-left: max(16px, var(--sai-left));
  padding-right: max(16px, var(--sai-right));
}

/* Ensure inputs scroll into view above Android keyboard */
@media (max-width: 768px) {
  .modal-overlay input:focus,
  .modal-overlay textarea:focus,
  .modal-overlay select:focus {
    scroll-margin-bottom: 120px;
  }
}
