
# PickleballDirector

Professional tournament and league management platform for Pickleball.

## Features

*   **Tournaments**: Create events, manage divisions (Singles/Doubles), and generate brackets/pools.
*   **Leagues**: Long-running competitions with Round Robin scheduling and automated standings.
*   **Live Scoring**: Players submit scores, opponents verify. Real-time leaderboard updates.
*   **Clubs**: Manage club memberships and hosting rights.
*   **DUPR Integration**: Sync player ratings (mocked service).

## Data Model

### Competitions (Leagues)
*   **Collection**: `competitions`
*   **Document**: Stores settings (points, tie-breakers), divisions, and status.
*   **Subcollections**:
    *   `competitionEntries`: Links players/teams to the league.
    *   `matches`: Generated fixtures.
    *   `standings`: Live calculated table (Win/Loss/Points).

### Matches
*   **Collection**: `matches` (Root or Subcollection)
*   **Flow**:
    1.  `scheduled`: Created by system/organizer.
    2.  `in_progress`: Started by players/organizer.
    3.  `pending_confirmation`: Score submitted by one party.
    4.  `completed`: Score confirmed by opponent. Standings updated.
    5.  `disputed`: Flagged for organizer review.

## Security & Roles

The application uses Firebase Authentication and Firestore Security Rules for RBAC.

*   **App Admin**: Global permissions. Can create clubs and manage all users.
*   **Organizer**: Can create tournaments/leagues and manage their own events.
*   **Player**: Can register for events, view schedules, and submit scores for their own matches.

**Critical Operations** (Scheduling, Score Confirmation) are protected by **Cloud Functions** to ensure data integrity.

## Deployment

### Prerequisites
*   Firebase CLI installed (`npm install -g firebase-tools`)
*   Firebase project initialized.

### 1. Deploy Firestore Rules
Apply security rules to database.
```bash
firebase deploy --only firestore:rules
```

### 2. Deploy Cloud Functions
Deploy the server-side logic for scheduling and scoring.
```bash
firebase deploy --only functions
```

### 3. Deploy Indexes
If queries fail, deploy indexes (usually auto-generated by Firebase usage).
```bash
firebase deploy --only firestore:indexes
```

## Developer Tools

The app includes a hidden **Dev Tools** section (visible to Admins) to run integration tests against the live database.
1.  Log in as Admin.
2.  Open Profile Menu -> Dev Tools.
3.  Run "League Integration Test" to verify the full flow (Create -> Schedule -> Score -> Verify).
